															第一章 计算机系统漫游
1、	计算机信息：位+上下文
2、	c语言是贝尔实验室的Dennis Ritchie于1969 - 1973年创建的，ANSI在1989年颁布了ANSI C标准，后来交于ISO负责。
3、 编译系统：预处理器 -  编译器 - 汇编器 - 链接器
4、 hello.c - hello.i - hello.s - hello.o
5、 GNU项目是1984年由Richard Stallman发起的一个免税的慈善项目，已经开发出了除内核外的所有主要的部件环境：
	EMACS编辑器、GCC编译期、GDB调试器、汇编器、链接器、处理二进制文件的工具以及其他的一些部件。
6、	总线：贯穿整个系统的是一组电子管道，称做总线，它携带信息字节并负责在各个部件间传递。通常总线贝尔设计成传递定长的字节块，即字(word)。
7、I/O设备：系统与外部世界联系的通道。每个I/O设备都是通过一个控制器或者适配器与I/O总线相连。
8、主存：是一个临时存储设备，在程序执行时，用来存放程序和程序的处理数据。从物理上来说，主存是一组动态随机存取存储器(DRAM)芯片组成。
		 从逻辑上来讲，存储器是一个线性的字节数组，每个字节都有其唯一的地址，这些地址是从零开始的。
9、处理器：中央处理单元(CPU),是解释和执行指令的引擎。核心是一个字长的寄存器称为pc计数器。ALU-算术/逻辑单元。
			加载：将一个字节或者一个字从主存复制到寄存器，以覆盖寄存器原来的值。
			存储：将一个字节或者一个字从寄存器复制到主存，以覆盖原来的值。
			操作：把两个寄存器的内容复制到ALU，ALU对这两个字做算术操作，并将结果存储到一个寄存器中，以覆盖该寄存器原来的值。
			跳转：从指令中复制一个字，并将这个字复制到程序计算器中，以覆盖原来的值。
		指令集结构：描述的是每条机器代码指令的效果
		位体系结构：描述的是处理器实际上是如何实现的
10 信息存储。
		大多数计算机使用8位的块，字节(byte)作为最小可寻址的存储器单元。
		机器级程序将存储器视为一个非常大的字节数组，程序虚拟存储器，存储器的每一个字节都由唯一的数字标识，称为地址，所有地址集合称为虚拟地址空间(virtual address space)
		虚拟存储器是将随机访问存储器，磁盘存储器，特殊硬件和操作系统软件集合实现的
12 字长。每台计算机都是一个字长(word size)表明整数和指针的标称大小。虚拟地址采用字长来编码。
13 数据类型
			c声明					32位机器				64位机器
			char				    1个字节					1个字节
			short int				2个字节					2个字节
			int						4个字节					4个字节
			long int				4个字节					8个字节
			long long int			8个字节					8个字节
			float					4个字节					4个字节
			double					8个字节					8个字节
			指针					4个字节					8个字节
			
14 指针 对于任何数据类型T 声明 T *p。表明p是一个指针变量指向一个类型为T的变量。
15 字节顺序。对于任何跨越多个字节的程序对象。要建立两个规则，对象的地址是什么，以及如何排列这些地址。
	在几乎所有的机器上，多字节对象都被存储为连续的字节序列，对象地址使用字节中国最小的地址。
	大端法(bi-endian):高位在前
	小端法(little-endian):低位在前
16 强制类型转换允许一种数据类型引用另一种数据类型对象。
17 typedof提供了一种给数据类型命名的方式。
		typedof int *int_pointer:将数据类型定义为一个指向int的指针。
18 &取地址运算符。sizeof(T)返回存储一个类型为T的对象所需要的字节数。
19 字符串。c语言中字符串被编码为一个以null结尾的字符数组。每个字符都由某个标准编码表示，c语言使用的是ASCII编码。null = 0X00
20 布尔代数。
		布尔运算符：	~对应于逻辑运算符NOT。|对应于逻辑运算OR，&对应于逻辑运算AND，^对应于逻辑运算异或。
		布尔环：在长度为w的位向量上的布尔运算。a^a=0 a^b^a=b,a|0=a; a|1=1;a&0=0;a&1=a;a^0=a;a^1=!a。
		&掩码运算使可以一些位不变其它变为0，|掩码运算实现一些位不变其它变为0。^掩码运算可以实现一些位取补。
		c语言中位运算只能作用于整形上。int | 指针。
14 位移运算。 >> 右移。逻辑右移：高位补0 算术位移：高位补符号位。 << 左移。低位补0.		
		c语言默认使用算术位移，无符号的只能使符号位移。对应移位大于位数的，使用摸移位。
15 计算机整数编码有三种方式：补码，反码，原码。
   对于w位的二进制。补码的最高位权重位为负，反码的权重为负数减一，原码表示为符号位。
   计算机普遍采用补码表示法。
16 可以使用强制类型转换将有符号类型与无符号类型转换，转换不会造成二进制变化。
   对于一个二进制，无符号位类型和补码之间数值有一定关系。正数相等， 负数：无符号位减去补码得到全集数值。
   C语言对于无符号和有符号表达式，会默认的把有符号转换位无符号运算。
16  二进制扩展，将一个无符号数转换位一个更大的数据类型，在高位补0，称为零扩展(zero extension)。将一个补码数转换位一个更大的数据类型，在高位补符号位，称为符号扩展(sign extension)
	可以证明符号扩展其数值保持不变。
	当二进制扩展与符号位同时转换时，c语言规定先进行二进制扩展，再进行符号位转换。	
17 二进制截断。二进制截断是截断高位。对于无符号的截断，其值等于摸运算，有符号的等于取摸后再转换位有符号类型。
18 c语言中加法和乘法运算，发生溢出时都采用丢弃高位，并且都是采用无符号算法。			
			
			
			
			
	 
			
			
			
			
			
			
			
			
			
			
												第六章 存储器的层次结构
1，概述
		在计算机模型中，cpu负责指令的执行，存储器系统负责数据和指令的存储，存储器系统被组织为一个大的字节数组，cpu能以常量的时间访问每一个字节。
		在存储器系统内部，实际是由不同容量，成本，访问速度存储器组成的层次结构。寄存器 - 高速缓存存储器 - 主存储器 - 磁盘 - 网络。
		高速的存储器是作为低速存储器的缓存，存储器访问在1一个周期内就能访问，高速缓存存储器需要1 - 30个周期，主存储器50 - 200 ，磁盘几千万个周期。
		程序的局部性属性对程序的性能有着重大的影响。
		RAM，DRAM，ROM,机器硬盘，固态硬盘
	
2  存储技术
		随机访问存储器(Random-Access memory)。分为静态和动态存储器，SRAM和DRAM。
		SRAM使用双稳态的存储器单元存储位，每个双稳态由六个晶体管组成，它只有两种状态，其它任何状态都是不稳定的，会恢复到稳定状态，他能抵抗电子干扰。
		DRAM将位存储位对一个电容的充电，每个存储单元由一个电容和一个访问晶体管组成。DRAM对电子干扰非常敏感，并且不可恢复。DRAM必须周期性的刷新。
				每位晶体管数			相对访问时间		持续性			敏感性			相对造价			应用
		SRAM		6						1				  是			  否			   100		   高速缓存存储器 
		DRAM 		1						10				  否			  是				1		   主存，帧缓冲区
		
3	传统的DRAM
		每个位都划分到一个超单元中，存储由超单元组成，所有超单元被组织成一个二位的数组。(i，j)。
		DRAM芯片通过引脚与存储控制器相连，引脚分为地址引脚和数据引脚，地址引脚传递访问地址，数据引脚传递访问数据。
		存储控制器将逻辑地址，转换位(i,j)格式的访问地址，i - RAS(Row access strobe)行访问选通脉冲  j - CAS (column access strobe)列访问选通脉冲
		访问过程：先发送行RAS，DRAM将相应行数据访问高速缓存区，再发送CAS，DRAM在高数缓存区取出相应数据。
		将DRAM组织成二维阵列而不是线性数组，主要是为了减少引脚数量。
		
4  	存储器模块
		DRAM芯片包装在存储器模块(memory module)中，它是插到主板的扩展槽上的，常见的包装包括168个引脚的双列直插存储器模块(Dual Inline Memory Module)
		它以64位为块传送数据，和72个引脚的单列直插存储器模块(Single Inline Memory Module)以32为块传送数据。
		
5 	增强的DRAM
		快页模式DRAM(Fast Page Mode DRAM,FPM DRAM),
		扩展数据输出DRAM(Extended Data Out DRAM EDO DRAM)
		同步DRAM(Synchronous DRAM,SDRAM)
		双倍速率同步DRAM(Double Data-rate synchronous DRAM)
		Rambus DRAM(RDRAM)
		视频DRAM(Video DRAM,VDRAM)
		
		主流是使用Double Data-rate synchronous DRAM 例如 DDR3 DRAM
		
6	非易失性存储器
		PROM(Programmable ROM，可编程ROM)，只能被编程一次。
		可擦写可编程ROM(Erasable Programmable ROM,EPROM)
		闪存(flash memory)
		
		存储在ROM中的程序通常被称为固件(firmware)
		
7 	访问主存
		总线：共享电子电路。
		总线事务：数据传递和处理通过一系列步骤完成，这些步骤就称为总线事务。
		总线传递的信息可分为：地址，数据，控制信号。
		计算机系统的主要模块：cpu芯片，I/O桥的芯片组，DRAM存储器模块。
		系统总线：连接cpu与i/o桥。存储器总线：连接i/o桥与DRAM。i/o总线：连接i/o桥与i/o设备。
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
																						第十三章 并发编程
1 并发(concurrent):	逻辑控制流在时间上重叠。
2 构建应用级并发的几种方式：
	1 进程：每个控制流都是一个进程，由内核来调度维护。
	2 i/o多路复用：应用程序在进程上下文中显示的调度自己的控制流。每个控制流都被模型化为状态机，作为数据到文件描述符的结果，主程序从一个状态转换为另一个状态。
	3 线程：在进程上下文中的控制流，由内核进行调度维护。
3 共享变量：被多个线程引用的变量。
4 线程的存储模型：每个线程都有自己的线程上下文，包括唯一的整数线程ID,栈，栈指针，程序计数器，通用目的的寄存器和条件码。线程之间共享整个进程的上下文。
				  线程能够访问进程的整个虚拟存储器空间，所有线程能够访问其它线程除了寄存器的所有内存空间。
5 将变量映射到存储器。
	1 全局变量，定义在函数外的变量。在运行时虚拟存储器的读写区域只包含每个全局变量的一个实例。
	2 本地自动变量，定义在函数内部并且没有static属性的变量。在运行时每个线程的栈都包含它自己的所有本地自动变量的实例。
	3 本地自动变量，定义在函数内部并且有static属性的变量。和全局变量一样，虚拟存储器中的读写区域只包含一个实例。
6 信号量(semphore)
	信号量是一种特殊类型的变量s，只能由两种特殊的变量来处理，称为P和V。
	P:如果s为非0，则s减一，并且立即返回，如果s为0则，阻塞线程。
	V：s加一，唤醒一个正在P阻塞的线程。
7 线程安全函数：当且仅当线程被多个线程调用，总能产生正确的结果。
  线程不安全函数：
		1、不包含共享变量
		2、保持跨越多个调用的状态的函数
		3、返回指向静态变量的函数
		4、调用线程不安全函数的函数
8 可重用函数：不会引用任何共享变量的函数。可重用函数是线程安全的，它是线程安全函数的真子集。
9 竞争：程序的正确性依赖线程之间的执行轨迹。		
		
		
		
		
		
		
												
			